# kotlinのgradle開発

# 想定環境

##install済みのソフト
* javaコンパイラー
* kotlinコンパイラー
* Gradle

#　やり方
```
mkdir test
cd test
```

```
gradle init
```

とコマンドを打つ。すると次のような文が流れる

```
Select type of project to generate:
  1: basic
  2: groovy-application
  3: groovy-library
  4: java-application
  5: java-library
  6: kotlin-application
  7: kotlin-library
  8: scala-library
Enter selection (default: basic) [1..8]
```

これが出てきたら、kotlinのアプリを作るので、kotlin-applicationを選択する。

```
Select build script DSL:
  1: groovy
  2: kotlin
Enter selection (default: kotlin) [1..2]
```

そうしたら、buildファイルで使う言語を指定しろといってくるので、gradleを選択する。あとはデフォルトで大丈夫です。

このままだと、jarにコンパイルできないのでbuild.gradleを編集します。
これが、デフォルトだと以下の通りになります。
```
/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Kotlin application project to get you started.
 */

plugins {
    // Apply the Kotlin JVM plugin to add support for Kotlin on the JVM
    id 'org.jetbrains.kotlin.jvm' version '1.3.10'

    // Apply the application to add support for building a CLI application
    id 'application'
}

repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

dependencies {
    // Use the Kotlin JDK 8 standard library
    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'

    // Use the Kotlin test library
    testImplementation 'org.jetbrains.kotlin:kotlin-test'

    // Use the Kotlin JUnit integration
    testImplementation 'org.jetbrains.kotlin:kotlin-test-junit'
}

// Define the main class for the application
mainClassName = 'test.AppKt'
```

となります。これを以下の通りになります。
次のコードを元あったコードを消して上書きしても構いません。

```
/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Kotlin application project to get you started.
 */


plugins {
    // Apply the Kotlin JVM plugin to add support for Kotlin on the JVM
    id 'org.jetbrains.kotlin.jvm' version '1.3.10'

    // Apply the application to add support for building a CLI application
    id 'application'
}

repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

dependencies {
    // Use the Kotlin JDK 8 standard library
    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'

    // Use the Kotlin test library
    testImplementation 'org.jetbrains.kotlin:kotlin-test'

    // Use the Kotlin JUnit integration
    testImplementation 'org.jetbrains.kotlin:kotlin-test-junit'

    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.3.11"
}

jar {
    manifest {
        attributes 'Main-Class': "test.AppKt"
    }
    from {
    configurations.compile.collect {
        it.isDirectory() ? it : zipTree(it)
      }
    }

}
// Define the main class for the application
mainClassName = 'test.AppKt'

```

そして、次のコマンドを打ちます

```
gradle jar
```

すると、次のところにjarがありますので、それを実行してみてください

```
cd build/libs/test.jar
java -jar test.jar
```

## packageを追加

```
cd src/main/kotlin
mkdir omega && cd omega
```

omegaに移ったら、omega.ktというファイルを作ってください。
そうしたら、以下のコードを入れます。

```
package omega

class Rational(val numerator: Int, val denominator: Int)
```

そして、src/main/kotlin/test/App.ktのコード以下のように書き換える

```
package test
import omega.*

class App {
    val greeting: String
        get() {
            return "Hello world."
        }
}

fun main(args: Array<String>) {
    val half = omega.Rational(1, 2)
    println(half.denominator)
    println(App().greeting)
}
```

すると、omegaファイルがロードされていることになり、実行されます。


## UDPが通った。
